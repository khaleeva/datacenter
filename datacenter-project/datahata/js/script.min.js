const burger=document.querySelector(".burger"),overlay=document.querySelector(".overlay"),swipe_block=document.querySelector(".swipe-menu__container"),accordion_headers=document.querySelectorAll(".accordion-header"),accordion_panels=document.querySelectorAll(".accordion-panel");function menuClick(){burger&&burger.addEventListener("click",(function(){burger.classList.toggle("burger_open"),overlay.classList.toggle("overlay_active"),swipe_block.classList.toggle("swipe-menu__container_open"),document.body.classList.toggle("active-body")}))}function menuAccClick(){for(let e of accordion_headers)e.nextElementSibling.classList.contains("accordion-panel_open")&&(e.nextElementSibling.classList.remove("accordion-panel_open"),swipe_block.style.minHeight="690px"),e.addEventListener("click",(function(t){let c=!this.classList.contains("accordion-header_close");if(setClass(accordion_headers,"accordion-header_close","remove"),setClass(accordion_panels,"accordion-panel_open","remove"),c&&(this.classList.toggle("accordion-header_close"),this.nextElementSibling.classList.toggle("accordion-panel_open")),e.nextElementSibling.classList.contains("accordion-panel_open")){let e=t.target.nextElementSibling.scrollHeight;swipe_block.style.minHeight=690+e+"px"}else swipe_block.style.minHeight="690px"}))}function setClass(e,t,c){for(let a=0;a<e.length;a++)e[a].classList[c](t)}document.addEventListener("DOMContentLoaded",(function(){menuClick(),menuAccClick()}));const swipeBtn=document.querySelector(".swipe-line");swipeBtn.addEventListener("swiped-down",(function(){burger.classList.remove("burger_open"),overlay.classList.remove("overlay_active"),swipe_block.classList.remove("swipe-menu__container_open"),document.body.classList.remove("active-body")})),swipeBtn.addEventListener("click",(function(){burger.classList.remove("burger_open"),overlay.classList.remove("overlay_active"),swipe_block.classList.remove("swipe-menu__container_open"),document.body.classList.remove("active-body")}));const accordionBtns=document.querySelectorAll(".accordion-header-services"),accSection=document.querySelector(".colocation-services-accordion"),panels=document.querySelectorAll(".accordion-panel-services");let accordionFirst=document.getElementById("first-content"),dedicContent=document.getElementById("dedic-content");const innerLinks=document.querySelectorAll(".inner-link");let formHeight=document.querySelector(".form-container");accordionFirst&&(accordionFirst.style.maxHeight=accordionFirst.scrollHeight+"px"),dedicContent&&formHeight&&(dedicContent.style.maxHeight=dedicContent.scrollHeight+formHeight.scrollHeight+"px");for(let e of accordionBtns)e.addEventListener("click",(function(){let e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,accSection&&(accSection.style.minHeight="96px")):(e.style.maxHeight=e.scrollHeight+"px",accSection&&(accSection.style.minHeight=e.scrollHeight+"px"))}));const reviewLinks=document.querySelectorAll(".read-more-button"),parents=document.querySelectorAll(".review__card-inner"),limiters=document.querySelectorAll(".limiter");for(let e of reviewLinks)e.parentElement.classList.contains("review__card-inner_active")&&e.parentElement.classList.remove("active-section"),e.addEventListener("click",(function(){let t=!this.classList.contains("active");setClass(reviewLinks,"active","remove"),setClass(parents,"review__card-inner_active","remove"),setClass(limiters,"active-limiter","remove"),setInner(reviewLinks),t?(this.classList.add("active"),this.parentNode.classList.add("review__card-inner_active"),this.previousSibling.previousSibling.classList.add("active-limiter"),e.innerHTML="Свернуть"):(this.classList.remove("active"),this.parentNode.classList.remove("review__card-inner_active"),this.previousSibling.previousSibling.classList.remove("active-limiter"),e.innerHTML="Развернуть")}));function setInner(e){for(let t=0;t<e.length;t++)e[t].classList.contains("active")?e[t].innerHTML="Свернуть":e[t].innerHTML="Развернуть"}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("error"),e.classList.add("error")}function c(e){e.parentElement.classList.remove("error"),e.classList.remove("error")}function a(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e&&e.addEventListener("submit",(async function(r){r.preventDefault();let n=function(e){let r=0,n=document.querySelectorAll(".req");for(let e=0;e<n.length;e++){const o=n[e];c(o),o.classList.contains("email")?a(o)&&(t(o),r++):""===o.value&&(t(o),r++)}return r}(),o=new FormData(e);if(0===n){e.classList.add("sending");let t=await fetch("send.php",{method:"POST",body:o});if(t.ok){await t.json();e.classList.add("display-none"),document.querySelector("#form-title").style.display="none",document.querySelector(".form-send").classList.add("active")}else alert("Что-то пошло не так..."),e.reset()}else alert("Заполните обязательные поля")}))}));let closeIconPartners=document.getElementById("close-icon-partners"),partnersBtn=document.querySelector(".partners-btn");const form=document.getElementById("form"),swipeFormLine=document.querySelector("#partners-swipe-line");partnersBtn&&partnersBtn.addEventListener("click",(function(){document.body.classList.add("active-body"),document.querySelector(".wrapper-partners").classList.add("active"),document.querySelector(".form-send").classList.remove("active"),form.classList.remove("display-none"),document.querySelector("#form-title").style.display="block",document.querySelector(".partners-container").classList.add("active")})),closeIconPartners&&closeIconPartners.addEventListener("click",(function(){document.querySelector(".wrapper-partners").classList.remove("active"),document.querySelector(".form-send").classList.remove("active"),form.reset(),document.body.classList.remove("active-body"),document.querySelector(".partners-container").classList.remove("active")})),swipeFormLine&&(swipeFormLine.addEventListener("swiped-down",(function(){document.querySelector(".wrapper-partners").classList.remove("active"),document.querySelector(".form-send").classList.remove("active"),form.reset(),document.body.classList.remove("active-body"),document.querySelector(".partners-container").classList.remove("active")})),swipeFormLine.addEventListener("click",(function(){document.querySelector(".wrapper-partners").classList.remove("active"),document.querySelector(".form-send").classList.remove("active"),form.reset(),document.body.classList.remove("active-body"),document.querySelector(".partners-container").classList.remove("active")})));let map_containers=document.querySelectorAll(".map_container"),options_map={once:!0,passive:!0,capture:!0};if(map_containers)for(let e of map_containers)e.addEventListener("click",start_lazy_map,options_map),e.addEventListener("mouseover",start_lazy_map,options_map),e.addEventListener("touchstart",start_lazy_map,options_map),e.addEventListener("touchmove",start_lazy_map,options_map);let map_loaded=!1;function start_lazy_map(){if(!map_loaded){let e=document.querySelectorAll(".ymap_lazy");for(let t of e)map_loaded=!0,t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src")}}const ranges=document.querySelectorAll(".range"),calcBtnUnit=document.querySelector("#btn-unit"),calcBtnTower=document.querySelector("#btn-tower"),closeIcon=document.querySelector(".close-icon"),checkBox=document.querySelector(".checkbox-input"),currentCost=document.querySelector(".cost-info"),inputIp=document.querySelector("#input-ip"),swipeCalcBtn=document.querySelector("#calc-swipe-line"),addCalcBtn=document.querySelector(".btn-add-calc"),calcTable=document.querySelector(".calc-table"),costCalc=document.querySelector(".cost-calculation"),rub=document.querySelector("#rub"),byn=document.querySelector("#byn");let measure,output,currentCurrency,currency,powerValue=0,unitValue=0,portValue=0,ipValue=0,supplyValue=0,sum=0,power=0,unit=0,ip=0,port=0,supply=0,rangeValue=0;const IP_REGEXP=/^[1-9]([0-9]*)$/,costServerElem=document.querySelector("#costServer"),costTowerElem=document.querySelector("#costTower"),costPowerElem=document.querySelector("#costPower"),costUnitElem=document.querySelector("#costUnit"),costSupplyElem=document.querySelector("#costSupply"),costPortElem=document.querySelector("#costPort"),costIpElem=document.querySelector("#costIp");async function getCurrency(){let e=await fetch("https://www.nbrb.by/api/exrates/rates/456/?periodicity=0");currentCurrency=await e.json();let t=currentCurrency.Cur_OfficialRate;currency=(100/t).toFixed(2)}function validateIpInput(e){return IP_REGEXP.test(e)}calcBtnUnit&&calcBtnUnit.addEventListener("click",getCurrency),calcBtnTower&&calcBtnTower.addEventListener("click",getCurrency),document.querySelector("#unitServer")&&(costPower=parseFloat(costPowerElem.innerHTML.replace(/,/,".")),costSupply=parseFloat(costSupplyElem.innerHTML.replace(/,/,".")),costPort=parseFloat(costPortElem.innerHTML.replace(/,/,".")),costIp=parseFloat(costIpElem.innerHTML.replace(/,/,".")),costServer=parseFloat(costServerElem.innerHTML.replace(/,/,".")),costUnit=parseFloat(costUnitElem.innerHTML.replace(/,/,"."))),document.querySelector("#towerServer")&&(costPower=parseFloat(costPowerElem.innerHTML.replace(/,/,".")),costSupply=parseFloat(costSupplyElem.innerHTML.replace(/,/,".")),costPort=parseFloat(costPortElem.innerHTML.replace(/,/,".")),costIp=parseFloat(costIpElem.innerHTML.replace(/,/,".")),costTower=parseFloat(costTowerElem.innerHTML.replace(/,/,"."))),costServerElem&&costTowerElem&&costPowerElem&&costUnitElem&&costPortElem&&costSupplyElem&&costIpElem&&(costServer=parseFloat(costServerElem.innerHTML.replace(/,/,".")),costTower=parseFloat(costTowerElem.innerHTML.replace(/,/,".")),costPower=parseFloat(costPowerElem.innerHTML.replace(/,/,".")),costUnit=parseFloat(costUnitElem.innerHTML.replace(/,/,".")),costSupply=parseFloat(costSupplyElem.innerHTML.replace(/,/,".")),costPort=parseFloat(costPortElem.innerHTML.replace(/,/,".")),costIp=parseFloat(costIpElem.innerHTML.replace(/,/,".")));for(let e of ranges)e.oninput=function(){output=this.parentElement.parentElement.firstElementChild.lastElementChild,measure=output.getAttribute("data-value"),output.innerHTML=`${this.value} ${measure}`},e.addEventListener("input",getValue);function getValue(){let e=0;"Вт"===measure?(e=this.value/12.5-20,this.previousSibling.previousSibling.firstElementChild.style.width=e+"%",powerValue=parseFloat(((this.value-250)/50*costPower).toFixed(2))):"U"===measure?(e=14.286*this.value-14.286,this.previousSibling.previousSibling.firstElementChild.style.width=e+"%",unitValue=parseFloat((this.value*costUnit-costUnit).toFixed(2))):"Gb/s"===measure&&(e=14.286*this.value-14.286,this.previousSibling.previousSibling.firstElementChild.style.width=e+"%",portValue=parseFloat((this.value*costPort-costPort).toFixed(2))),calcValue()}function calcValue(){let e;return e="block"===costCalc.querySelector(".unit-item").style.display?costServer:costTower,sum=parseFloat(e+powerValue+unitValue+ipValue+portValue+supplyValue),rub.checked?(currentCost.innerHTML=`&asymp; ${(sum.toFixed(2)*currency).toFixed(2)} RUB`,(sum.toFixed(2)*currency).toFixed(2)):(currentCost.innerHTML=`${sum.toFixed(2)} BYN`,sum.toFixed(2))}function addCalcServer(){let e=0;calcTable.querySelectorAll(".calc-table-container").length>=9&&(addCalcBtn.disabled="true",addCalcBtn.classList.remove("btn-gr-bg"),addCalcBtn.classList.add("disabled"));let t=document.createElement("div");t.classList.add("calc-table-container"),calcTable.prepend(t);let c=document.createElement("div");c.classList.add("calc-table-name"),c.innerHTML=`Сервер ${unit} ${power} ${ip} ${port} ${supply}`,t.append(c);let a=document.createElement("div");a.classList.add("calc-table-cost"),a.innerHTML=calcValue(),t.append(a),nullCalcValue();for(let t of document.querySelectorAll(".calc-table-cost"))e+=parseFloat(t.innerHTML);document.querySelector(".total-text").innerHTML="Итого",rub.checked?document.querySelector(".total").innerHTML=`&asymp; ${e.toFixed(2)} RUB`:document.querySelector(".total").innerHTML=`${e.toFixed(2)} BYN`}function nullCalcValue(){for(range of ranges)range.value=0,range.previousSibling.previousSibling.firstElementChild.style.width="0%","Вт"===range.parentElement.parentElement.firstElementChild.lastElementChild.getAttribute("data-value")?range.parentElement.parentElement.firstElementChild.lastElementChild.innerHTML="250 Вт":"U"===range.parentElement.parentElement.firstElementChild.lastElementChild.getAttribute("data-value")?range.parentElement.parentElement.firstElementChild.lastElementChild.innerHTML="1 U":range.parentElement.parentElement.firstElementChild.lastElementChild.innerHTML="1 Gb/s",powerValue=0,unitValue=0,ipValue=0,portValue=0,supplyValue=0,inputIp.value="";checkBox&&checkBox.checked&&(checkBox.checked=!1),costCalc&&(rub.checked?"block"===costCalc.querySelector(".unit-item").style.display?currentCost.innerHTML=`&asymp; ${(costServer.toFixed(2)*currency).toFixed(2)} RUB`:currentCost.innerHTML=`&asymp; ${(costTower.toFixed(2)*currency).toFixed(2)} RUB`:"block"===costCalc.querySelector(".unit-item").style.display?currentCost.innerHTML=`${costServer.toFixed(2)} BYN`:currentCost.innerHTML=`${costTower.toFixed(2)} BYN`)}function nullValue(){if(document.body.classList.remove("active-body"),document.querySelector(".calc-container")&&document.querySelector(".calc-container").classList.remove("active-calc-container"),document.querySelector(".wrapper-calc")&&document.querySelector(".wrapper-calc").classList.remove("active"),calcTable&&calcTable.classList.remove("active-calc-table"),rub.checked&&(rub.checked=!1,byn.checked=!0),nullCalcValue(),calcBtnUnit&&calcTable.querySelectorAll(".calc-table-container").length>0)for(child of calcTable.querySelectorAll(".calc-table-container"))child.remove();addCalcBtn&&(addCalcBtn.disabled=!1,addCalcBtn.classList.add("btn-gr-bg"),addCalcBtn.classList.remove("disabled")),document.querySelector(".ip-span")&&document.querySelector(".ip-span").classList.remove("active-span")}function removeClasses(){document.body.classList.remove("active-body"),document.querySelector(".wrapper-calc").classList.remove("active"),nullValue()}document.querySelector(".checkbox-container")&&document.querySelector(".checkbox-container").addEventListener("change",(function(){supplyValue=checkBox.checked?costSupply:0,calcValue()})),inputIp&&(inputIp.oninput=function(){let e=0;inputIp.value<=1?(e=0,ipValue=0):(e=inputIp.value-1,ipValue=parseFloat((e*costIp).toFixed(2))),calcValue(),validateIpInput(inputIp.value)||""==inputIp.value?document.querySelector(".ip-error").classList.remove("active-error"):document.querySelector(".ip-error").classList.add("active-error")}),rub&&(rub.addEventListener("input",calcValue),rub.addEventListener("change",(function(){if(calcTable&&calcTable.classList.remove("active-calc-table"),nullCalcValue(),calcBtnUnit&&calcTable.querySelectorAll(".calc-table-container").length>0)for(child of calcTable.querySelectorAll(".calc-table-container"))child.remove();addCalcBtn&&(addCalcBtn.disabled=!1,addCalcBtn.classList.add("btn-gr-bg"),addCalcBtn.classList.remove("disabled")),document.querySelector(".ip-span")&&document.querySelector(".ip-span").classList.remove("active-span")}))),byn&&(byn.addEventListener("input",calcValue),byn.addEventListener("change",(function(){if(calcTable&&calcTable.classList.remove("active-calc-table"),nullCalcValue(),calcBtnUnit&&calcTable.querySelectorAll(".calc-table-container").length>0)for(child of calcTable.querySelectorAll(".calc-table-container"))child.remove();addCalcBtn&&(addCalcBtn.disabled=!1,addCalcBtn.classList.add("btn-gr-bg"),addCalcBtn.classList.remove("disabled")),document.querySelector(".ip-span")&&document.querySelector(".ip-span").classList.remove("active-span")}))),addCalcBtn&&(addCalcBtn.addEventListener("click",(function(){document.querySelector(".calc-container").classList.add("active-calc-container"),calcTable.classList.add("active-calc-table"),document.querySelector(".calc-total-amount").classList.add("active-total-amount"),power=`${document.querySelector("#power-range").value}Вт`,port=`${document.querySelector("#port-range").value}Gb/s`,unit="block"===costCalc.querySelector(".unit-item").style.display?`${document.querySelector("#unit-range").value}U`:"Tower",ip=0==inputIp.value||1==inputIp.value?"1IP":`${inputIp.value}IP`,supply=checkBox.checked?"2БП":"1БП"})),addCalcBtn.addEventListener("click",addCalcServer)),calcBtnUnit&&calcBtnUnit.addEventListener("click",(function(){document.body.classList.add("active-body"),document.querySelector(".wrapper-calc").classList.add("active"),document.querySelector(".unit-item").style.display="block",document.querySelector(".calc-container").classList.add("active-calc"),rub.checked?currentCost.innerHTML=`&asymp; ${(costServer.toFixed(2)*currency).toFixed(2)} RUB`:currentCost.innerHTML=`${costServer.toFixed(2)} BYN `})),calcBtnTower&&calcBtnTower.addEventListener("click",(function(){document.body.classList.add("active-body"),document.querySelector(".wrapper-calc").classList.add("active"),document.querySelector(".calc-container").classList.add("active-calc"),document.querySelector(".unit-item").style.display="none",rub.checked?currentCost.innerHTML=`&asymp; ${(costTower.toFixed(2)*currency).toFixed(2)} RUB`:currentCost.innerHTML=`${costTower.toFixed(2)} BYN`})),closeIcon&&closeIcon.addEventListener("click",nullValue),swipeCalcBtn&&(swipeCalcBtn.addEventListener("swiped-down",removeClasses),swipeCalcBtn.addEventListener("click",removeClasses));let formServer=document.querySelector(".order-form"),cpuContainer=document.querySelector(".cpu-wrapper"),hddContainer=document.querySelector(".hdd-wrapper"),ramContainer=document.querySelector(".ram-wrapper"),radio_container=document.querySelector(".radio-container"),ram_container=document.querySelector(".ram-container"),resultServer=document.querySelector(".result-order"),constructor=document.querySelector(".constructor"),bucketBtn=document.querySelector("#bucket-btn"),config=document.querySelector(".config-server"),price=document.querySelector(".server-price"),select_wrapper=document.querySelector(".select-wrapper"),showMore_btn=document.querySelector(".showMore");const formElement=document.getElementById("order-form");let stateHdd={},stateRam={},stateCpu={};function getServers(e){select_wrapper&&(select_wrapper.innerHTML+=`<select name="select" id="select-cpu" class="select" >\n        ${e.map((e=>`<option value=${e.id.$}>${e.name_ru.$}</option>`)).join("")}\n</select>`);let t=document.querySelector("#select-cpu"),c=e.filter((e=>e.id.$===t.value)),a=Math.ceil(1.2*c.map((e=>e.price.period[0].$cost))[0]);stateCpu.cpu_select={id:`${c[0].id.$}`,nameServer:`${c[0].name_ru.$}`,price:`${a}`},getHdd(e,t.value),getConfig(),t.addEventListener("change",(function(c){let a=e.filter((e=>e.id.$===t.value)),r=a[0].name_ru.$,n=Math.ceil(1.2*a.map((e=>e.price?.period[0].$cost))[0]);getHdd(e,t.value),stateCpu.cpu_select={id:t.value,nameServer:r,price:`${n}`},getConfig()}))}function getValueRadioHdd(e,t,c,a,r){stateHdd[`${t}`]={hdd:e.value,idAddon:c,label:a,price:`${r}`},getConfig()}function getValueRadioRam(e,t,c,a,r){stateRam[`${t}`]={ram:e.value,idAddon:c,label:a,price:`${r}`},getConfig()}function changeStateHdd(e,t){stateHdd={},e.map(((e,c)=>stateHdd[`hdd${c+1}_radio`]={hdd:`${e[0].id.$}`,idAddon:`${t[c]}`,label:`${e[0].name_ru.$}`,price:`${e[0].price.period[0].$cost}`}))}function changeStateRam(e,t){stateRam={},e.map(((e,c)=>stateRam.ram_radio={ram:`${e[0].id.$}`,idAddon:`${t[c]}`,label:`${e[0].name_ru.$}`,price:`${e[0].price.period[0].$cost}`}))}const getRam=e=>{let t=e.map((e=>"14"===e.enumeration[1]?.id.$&&e.id.$)).filter((e=>e)),c=e.map((e=>e.enumeration[1])).filter((e=>e)).filter((e=>"14"===e.id.$)).map((e=>e.enumerationitem));changeStateRam(c,t),ramContainer.childNodes.length>0&&(ram_container.innerHTML=""),c.map(((e,a)=>ram_container.innerHTML+=`<p class="ram-title">Оперативная память</p><div class="box-ram">${c[a].map((e=>`<label class="radio" for="ram${e.id.$}_radio" >\n<input type="radio" name="ram_radio" value=${e.id.$} id="ram${e.id.$}_radio" \ndata-text='${e.name_ru.$}' data-value="${t[a]}"\n${stateRam.ram_radio.ram===e.id.$?"checked":""} onchange="getValueRadioRam(this, name, dataset.value, dataset.text, ${e.price.period[0].$cost} )"  />\n<div class="radio__text">${e.name_ru.$}</div>\n</label>`)).join("")}</div>`))},getHdd=(e,t)=>{let c=e.filter((e=>e.id.$===t)).map((e=>e.addon)).flat(1),a=c.map((e=>"11"===e.enumeration[1]?.id.$&&e.id.$)).filter((e=>e)),r=c.map((e=>e.enumeration[1])).filter((e=>e)).filter((e=>"11"===e.id.$)).map((e=>e.enumerationitem));getRam(c),changeStateHdd(r,a),hddContainer.childNodes.length>0&&(radio_container.innerHTML=""),r.length<=2?showMore_btn.style.display="none":showMore_btn.style.display="block";let n=r.slice(2,r.length);r.length<=2?r.map(((e,t)=>radio_container.innerHTML+=`<p>Выбрать жесткий диск ${t+1}</p><div class="box">${r[t].map((e=>`<label class="radio" for="hdd${e.id.$}${t+1}_radio" >\n<input type="radio" name="hdd${t+1}_radio" value=${e.id.$} id="hdd${e.id.$}${t+1}_radio"  \ndata-text='${e.name_ru.$}'  \ndata-value="${a[t]}"\n${stateHdd[`hdd${t+1}_radio`].hdd===e.id.$?"checked":""} \nonchange="getValueRadioHdd(this, name, dataset.value, dataset.text, ${e.price.period[0].$cost})" />\n<div class="radio__text">${e.name_ru.$}</div>\n</label>`)).join("")}</div>`)):radio_container.innerHTML+=`<p>Выбрать жесткий диск 1</p> <div class="box">${r[0].map((e=>`<label class="radio" for="hdd${e.id.$}1_radio" >\n<input type="radio" name="hdd1_radio" value=${e.id.$} id="hdd${e.id.$}1_radio" data-text='${e.name_ru.$}' data-value="${a[0]}" ${stateHdd.hdd1_radio.hdd===e.id.$?"checked":""} onchange="getValueRadioHdd(this, name, dataset.value, dataset.text, ${e.price.period[0].$cost})" />\n<div class="radio__text">${e.name_ru.$}</div>\n</label>`)).join("")}</div> \n<p>Выбрать жесткий диск 2</p> <div class="box">${r[1].map((e=>`<label class="radio" for="hdd${e.id.$}2_radio" >\n<input type="radio" name="hdd2_radio" value=${e.id.$} id="hdd${e.id.$}2_radio"  data-text='${e.name_ru.$}' data-value="${a[1]}" ${stateHdd.hdd2_radio.hdd===e.id.$?"checked":""} onchange="getValueRadioHdd(this, name, dataset.value, dataset.text, ${e.price.period[0].$cost})" />\n<div class="radio__text">${e.name_ru.$}</div>\n</label>`)).join("")}</div>`,n.map(((e,t)=>radio_container.innerHTML+=`<p class="visible">Выбрать жесткий диск ${t+3}</p> <div class="visible">${n[t].map((e=>`<label class="radio"  for="hdd${e.id.$}${t+3}_radio" >\n<input  type="radio" name="hdd${t+3}_radio" value=${e.id.$} id="hdd${e.id.$}${t+3}_radio" data-text='${e.name_ru.$}' data-value='${a[t+3]}' ${stateHdd[`hdd${t+3}_radio`].hdd===e.id.$?"checked":""} onchange="getValueRadioHdd(this, name, dataset.value, dataset.text, ${e.price.period[0].$cost})" />\n<div class="radio__text">${e.name_ru.$}</div>\n</label>`)).join("")}</div>`))},showPerClick=4;function getConfig(){const e=Object.keys(stateCpu).map((e=>stateCpu[e].nameServer)),t=Object.keys(stateRam).map((e=>stateRam[e].label)),c=Object.keys(stateHdd).map((e=>stateHdd[e].label)),a=Object.keys(stateCpu).map((e=>Number(stateCpu[e].price)))[0],r=Object.keys(stateRam).map((e=>Number(stateRam[e].price)))[0];let n=Object.keys(stateHdd).map((e=>Number(stateHdd[e].price))).reduce(((e,t)=>e+t),0),o=(a+1.2*r+1.2*n).toFixed(2);price.innerHTML=`${o} <span>BYN/мес</span>`,config.innerHTML=`<div class = 'config-server'>\n        <div class = 'config-cpu'>${e}</div>\n        ${t.length?`<div class = 'config-ram'>Оперативная память - ${t}</div>`:""}\n            ${c.map(((e,t)=>"Без диска"===e?null:`<div class = 'config-hdd'>Диск ${t+1} - ${e}</div>`)).join("")}\n    </div>`}showMore_btn&&showMore_btn.addEventListener("click",(function(){let e=document.querySelectorAll(".visible");for(let t=0;t<4;t++)e[t].classList.add("box"),e[t].classList.remove("visible");document.querySelectorAll("div.box").length===Object.keys(stateHdd).length&&(showMore_btn.style.display="none")})),bucketBtn&&bucketBtn.addEventListener("click",(function(){const e=Object.keys(stateCpu).map((e=>stateCpu[e].id)),t=Object.keys(stateHdd).map((e=>`26addon_${stateHdd[e].idAddon}%3D${stateHdd[e].hdd}`)).join("%"),c=Object.keys(stateRam).map((e=>`26addon_${stateRam[e].idAddon}%3D${stateRam[e].ram}`)).join("%");bucketBtn.href=`https://my.datahata.by/billmgr?func=register&redirect=startpage%3Ddedic%26startform%3Dquickorder%26pricelist%3D${e}%26period%3D1%26project%3D1%${t}%${c}%26redirect%3Dbasket`}));const domain=document.getElementById("domain"),soft=document.getElementById("soft"),ssl=document.getElementById("ssl"),backup=document.getElementById("backup"),formOther=document.querySelector(".form-other-container");let state={};function getOtherServices(e,t,c){ssl&&generationHtml(e,ssl),domain&&generationHtml(t,domain),backup&&generationHtml(c,backup)}function getSoftServices(e){soft&&generationHtml(e,soft)}function generationHtml(e,t){e.length?t.innerHTML=`${e.map((e=>` <div class="table-body-item" >\n ${t===backup?`<p className="text">${e.name_ru.$} (за 1 ГБ) </p>`:`<p className="text">${e.name_ru.$}</p>`}\n                                   \n                                    ${t===ssl?`<div class="ssl-description">?<div class="ssl-text-description">${e.description_ru.$}</div></div>`:""}\n                                    \n                                    ${t===ssl?`<p class ='price'>${Math.ceil(1.2*e.price.period.$cost).toFixed(2)} BYN/год</p>`:""}\n                                    ${t===domain?`<p class ='price'>${Math.ceil(1.2*e.price.period[1].$cost).toFixed(2)} BYN/год</p>`:""}\n                                    ${t===backup?`<p class ='price'>${(1.2*e.addon[0].price.period[0].$cost).toFixed(2)} BYN/мес</p>`:""}\n                                    ${t===soft?`<p class ='price'>${Math.ceil(1.2*e.price.period[0].$cost).toFixed(2)} BYN/мес</p>`:""}\n         \n                                   \n                                    \n                                    \n                                </div>`)).join("")}`:t.closest(".accordion-section-services").style.display="none"}async function getDedicTariffPlan(){let e=await fetch("https://my.datahata.by/billmgr?func=pricelist.export&elid=1&out=json&onlyavailable=on");if(e.ok){let t=(await e.json()).doc.pricelist,c=t.filter((e=>"21"===e.itemtype.$)),a=t.filter((e=>"40"===e.itemtype.$)),r=t.filter((e=>"48"===e.itemtype.$)),n=t.filter((e=>"49"===e.itemtype.$)),o=t.filter((e=>"66"===e.itemtype.$));document.getElementById("dedic-page")?getServers(c):document.getElementById("other-page")?getOtherServices(r,n,o):getSoftServices(a),formServer&&formServer.classList.remove("get-data"),formOther&&formOther.classList.remove("get-data")}else alert("error"),formServer&&formServer.classList.remove("get-data"),formOther&&formOther.classList.remove("get-data")}window.onload=function(){getDedicTariffPlan().then()};